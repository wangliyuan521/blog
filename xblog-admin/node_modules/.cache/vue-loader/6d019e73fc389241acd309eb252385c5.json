{"remainingRequest":"D:\\xblog\\xblog-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\xblog\\xblog-admin\\src\\views\\project\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\xblog\\xblog-admin\\src\\views\\project\\index.vue","mtime":1583590624591},{"path":"D:\\xblog\\xblog-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\xblog\\xblog-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\xblog\\xblog-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\xblog\\xblog-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { fetchProjectList, deleteProject, addProject, updateProject } from '@/api/project'\r\nimport Upload from '@/components/Upload'\r\n\r\nexport default {\r\n  components: {\r\n    lbUpload: Upload\r\n  },\r\n  data() {\r\n    return {\r\n      data: {},\r\n      list: [\r\n        {\r\n          id: null,\r\n          name: '',\r\n          url: '',\r\n          projectOrder: '',\r\n          image: ''\r\n        }\r\n      ],\r\n      form: {\r\n        id: null,\r\n        name: '',\r\n        url: '',\r\n        projectOrder: '',\r\n        image: ''\r\n      },\r\n      page: 1,\r\n      size: 10,\r\n      currRow: null,\r\n      addVisible: false,\r\n      editVisible: false\r\n    }\r\n  },\r\n  created() {\r\n    this.fetchData()\r\n  },\r\n  methods: {\r\n    fetchData() {\r\n      fetchProjectList(this.page, this.size).then(response => {\r\n        this.list = response.data.list\r\n        this.data = response.data\r\n      })\r\n    },\r\n    calcIndex(index) {\r\n      return this.size * (this.page - 1) + index + 1\r\n    },\r\n    handleAdd() {\r\n      // reset\r\n      this.form = {\r\n        id: null,\r\n        name: '',\r\n        url: '',\r\n        projectOrder: '',\r\n        image: ''\r\n      }\r\n      this.addVisible = true\r\n    },\r\n    handleEdit() {\r\n      if (this.currRow === null) {\r\n        this.$message({\r\n          type: 'warning',\r\n          message: '请选择要修改的行'\r\n        })\r\n        return\r\n      }\r\n      this.form = this.currRow\r\n      this.addVisible = true\r\n    },\r\n    handleDelete() {\r\n      if (this.currRow === null) {\r\n        this.$message({\r\n          type: 'warning',\r\n          message: '请选择要删除的行'\r\n        })\r\n        return\r\n      }\r\n      this.$confirm(`此操作将永久删除项目“ ${this.currRow.name} ”，是否继续?`, '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        deleteProject(this.currRow.id).then(response => {\r\n          // 更新数据\r\n          this.fetchData()\r\n          this.$message({\r\n            type: 'success',\r\n            message: '删除成功!'\r\n          })\r\n          this.currRow = null\r\n        })\r\n      })\r\n    },\r\n    handleCurrentPageChange(currPage) {\r\n      this.page = currPage\r\n      this.fetchData()\r\n    },\r\n    handleCurrentRowChange(currRow) {\r\n      this.currRow = currRow\r\n    },\r\n    onSubmit() {\r\n      if (this.form.id) {\r\n        updateProject(this.form).then(response => {\r\n          this.addVisible = false\r\n          // 更新数据\r\n          this.fetchData()\r\n          this.$message({\r\n            type: 'success',\r\n            message: '更新成功!'\r\n          })\r\n        })\r\n      } else {\r\n        addProject(this.form).then(response => {\r\n          this.addVisible = false\r\n          // 更新数据\r\n          this.fetchData()\r\n          this.$message({\r\n            type: 'success',\r\n            message: '添加成功!'\r\n          })\r\n        })\r\n      }\r\n    }\r\n  }\r\n}\r\n",null]}